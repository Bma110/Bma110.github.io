<!doctype html><html lang=zh-cn><head><meta charset=utf-8><meta name=viewport content="width=device-width,height=device-height,initial-scale=1"><meta property="og:site_name" content="cheerful SDIOPID"><meta property="og:title" content="121.5_R_data-format and exchange"><meta property="og:description" content><meta property="og:locale" content="zh_CN"><meta property="og:url" content="https://sdiopid.top/archives/new-data-format-and-transform/"><meta property="og:image" content="https://daisilia.wiki/images/favicon.ico"><meta property="og:type" content="article"><meta property="article:published_time" content="2021-06-09 11:46:49 +0000 UTC"><meta property="article:modified_time" content="2021-06-09 11:46:49 +0000 UTC"><meta property="article:expiration_time" content="0001-01-01 00:00:00 +0000 UTC"><meta property="article:author" content="yuhuai GUO"><meta property="article:tag" content="R "><meta property="article:section" content><title>121.5_R_data-format and exchange | cheerful SDIOPID</title><link rel=stylesheet href=/css/bundle.min.e50aa5cdf1c99ab6aa8607583612b74a4ce6a2c6a2f87a12651b4fd5ec8e2e31.css integrity="sha256-5QqlzfHJmraqhgdYNhK3Skzmosai+HoSZRtP1eyOLjE="><link href=https://cdn.bootcdn.net/ajax/libs/font-awesome/6.2.0/css/all.min.css rel=stylesheet><link href=https://cdn.bootcdn.net/ajax/libs/animate.css/4.1.1/animate.min.css rel=stylesheet><link rel=preconnect href=https://fonts.googleapis.com><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link href="https://fonts.googleapis.com/css2?family=Marck+Script&family=Andada+Pro:ital,wght@0,400;0,700;1,400;1,700&family=Indie+Flower&family=JetBrains+Mono:ital,wght@0,400;0,700;1,400;1,700&family=Noto+Sans+SC:wght@400;700&family=Noto+Serif+SC:wght@400;700&family=Roboto:ital,wght@0,400;0,700;1,400;1,700&display=swap" rel=stylesheet><link rel="shortcut icon" href=/images/favicon.ico type=image/vnd.microsoft.icon><link rel=icon href=/images/favicon.ico type=image/vnd.microsoft.icon><script src=/js/jquery-3.6.0.min.js></script></head><body class=site-root id=SiteRoot><div id=preload-mask><div class=lds-default><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></div><div class=site-inner id=SiteInner><header class=site-header id=SiteHeader><h1 class=site-title>cheerful SDIOPID</h1><ul class=main-menu><li class=menu-item><a href=/><i class="fas fa-home"></i>Home</a></li><li class=menu-item><a href=/about/><i class="fas fa-user"></i>About</a></li><li class=menu-item><a href=/tags/><i class="fas fa-tags"></i>Tags</a></li><li class=menu-item><a href=/cards/><i style=line-height:15px;vertical-align:middle><svg id="svg10094" width="16.534685" height="15.297463" xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape" xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd" xmlns="http://www.w3.org/2000/svg" xmlns:svg="http://www.w3.org/2000/svg"><defs id="defs10098"/><sodipodi:namedview id="namedview10096" pagecolor="#ffffff" bordercolor="#999999" borderopacity="1" inkscape:showpageshadow="0" inkscape:pageopacity="0" inkscape:pagecheckerboard="0" inkscape:deskcolor="#d1d1d1"/><inkscape:clipboard min="315.37789,349.81892" max="331.91257,365.11639" geom-min="315.37789,349.81892" geom-max="331.91257,365.11638"/><g id="g10100" transform="matrix(3.7795276,0,0,3.7795276,-315.37789,-349.81893)"><rect style="fill:#777;stroke:#333;stroke-width:0;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:stroke fill markers;stop-color:#000000" id="rect7046-2" width="2.6458323" height="3.174999" x="-87.818535" y="93.428711" ry=".40289268" rx=".3713097" transform="scale(-1,1)"/><rect style="fill:#555;stroke:#333;stroke-width:0;stroke-linejoin:round;stroke-dasharray:none;stroke-dashoffset:0;stroke-opacity:1;paint-order:stroke fill markers;stop-color:#000000" id="rect7046-2-0" width="2.6458323" height="3.174999" x="-39.971855" y="119.56335" ry=".40289268" rx=".3713097" transform="matrix(-0.91098326,0.41244333,0.41244333,0.91098326,0,0)"/></g></svg></i>Cards</a></li><li class=menu-item><a href=/series/><i class="fas fa-book"></i>Series</a></li><li class="menu-item search" id=searchBtn><i class="fas fa-search"></i>CTRL-/</li></ul></header><div class=site-main id=SiteMain><div class=site-left data-pjax></div><div class=site-message-list></div><div class=site-content data-pjax id=SiteContent><h1 class="article-title single-title">121.5_R_data-format and exchange</h1><div class=article-metadata><ul class=meta-section><li class=meta-item><i class="fas fa-calendar"></i>
<span class=meta-item-text>Published on</span>
<span class=meta-item-value>2021-06-09</span></li><li class=meta-item><i class="fas fa-clock"></i>
<span class=meta-item-text>Modified on</span>
<span class=meta-item-value>2021-06-09</span></li></ul><ul class=meta-section><li class=meta-item><i class="fas fa-tag"></i>
<span class=meta-item-text>Tag:</span>
<span class=meta-item-value><a class=tag href=/tags/r>R</a></span></li><li class=meta-item><i class="fas fa-folder-open"></i>
<span class=meta-item-text>In</span>
<a class=meta-item-value href=/archives/>Archives</a></li></ul><ul class=meta-section><li class=meta-item><i class="far fa-file-word"></i>
<span class=meta-item-text>Word count ≈</span>
<span class=meta-item-value>2600</span></li><li class=meta-item><i class="fas fa-hourglass-start"></i>
<span class=meta-item-text>Reading time ≈</span>
<span class=meta-item-value>6 min</span></li></ul></div><div class=article-content><p>数据的存储不仅要方便人录入也要方便程序进行阅读。</p><p>数据有许多存储格式，在此我探究了那些数据存储的格式和一些转换方法。提醒我们关注在输入数据时遵守一些规则，使程序在读取时不会报错。</p><p><div class=image-wrap><a data-fancybox data-src=/img/image-20211111213248387.png><img src=/img/image-20211111213248387.png alt></a></div></p><p>update</p><h2 class=heading id=r语言数据帧><a href=#r%e8%af%ad%e8%a8%80%e6%95%b0%e6%8d%ae%e5%b8%a7>R语言数据帧</a></h2><p>在导入数据之前，先了解R中数据测存在方式。</p><p>数据帧是一个表或二维数组状结构，其中每一列包含一个可变的值和每行包含一组来自每列的值。</p><p>下面是一个数据帧的特征。</p><ul><li>列名应为非空。</li><li>行的名称应该是唯一的。</li><li>存储在数据帧中的数据可以是数字，因子或字符类型。</li><li>每列应包含数据项的数量相同。</li></ul><h3 class=heading id=创建数据帧><a href=#%e5%88%9b%e5%bb%ba%e6%95%b0%e6%8d%ae%e5%b8%a7>创建数据帧</a></h3><p># Create the data frame.</p><p>emp.data &lt;- data.frame(</p><p>emp_id = c (1:5),</p><p>emp_name = c(&ldquo;Rick&rdquo;,&ldquo;Dan&rdquo;,&ldquo;Michelle&rdquo;,&ldquo;Ryan&rdquo;,&ldquo;Gary&rdquo;),</p><p>salary = c(623.3,515.2,611.0,729.0,843.25),</p><p>start_date = as.Date(c(&ldquo;2012-01-01&rdquo;,&ldquo;2013-09-23&rdquo;,&ldquo;2014-11-15&rdquo;,&ldquo;2014-05-11&rdquo;,&ldquo;2015-03-27&rdquo;)),</p><p>stringsAsFactors=FALSE</p><p>)</p><p>#数据按照列输入，相同属性在同一列；列标题相同。</p><p># Print the data frame.</p><p>print(emp.data)</p><h3 class=heading id=得到数据帧的结构><a href=#%e5%be%97%e5%88%b0%e6%95%b0%e6%8d%ae%e5%b8%a7%e7%9a%84%e7%bb%93%e6%9e%84>得到数据帧的结构</a></h3><p>数据帧的结构可以通过使用函数 str()了解到</p><p>str(emp.data)</p><p>&lsquo;data.frame&rsquo;: 5 obs. of 4 variables:</p><p>$ emp_id : int 1 2 3 4 5</p><p>$ emp_name : chr &ldquo;Rick&rdquo; &ldquo;Dan&rdquo; &ldquo;Michelle&rdquo; &ldquo;Ryan&rdquo; &mldr;</p><p>$ salary : num 623 515 611 729 843</p><h3 class=heading id=数据在数据帧摘要><a href=#%e6%95%b0%e6%8d%ae%e5%9c%a8%e6%95%b0%e6%8d%ae%e5%b8%a7%e6%91%98%e8%a6%81>数据在数据帧摘要</a></h3><p>print(summary(emp.data))</p><h3 class=heading id=从数据帧中提取数据><a href=#%e4%bb%8e%e6%95%b0%e6%8d%ae%e5%b8%a7%e4%b8%ad%e6%8f%90%e5%8f%96%e6%95%b0%e6%8d%ae>从数据帧中提取数据</a></h3><h4 class=heading id=使用列名称从数据帧提取特定的列><a href=#%e4%bd%bf%e7%94%a8%e5%88%97%e5%90%8d%e7%a7%b0%e4%bb%8e%e6%95%b0%e6%8d%ae%e5%b8%a7%e6%8f%90%e5%8f%96%e7%89%b9%e5%ae%9a%e7%9a%84%e5%88%97><em>使用列名称从数据帧提取特定的列</em></a></h4><p>result &lt;- data.frame(emp.data$emp_name,emp.data$salary)</p><p># 提出emp.data.emp_name和emp.data.salary</p><p>result &lt;- emp.data[1:2,]</p><p>#提出第一行到第二行的所有列</p><p>emp_id emp_name salary start_date</p><p>1 1 Rick 623.3 2012-01-01</p><p>2 2 Dan 515.2 2013-09-23</p><h4 class=heading id=提取第3和第5行与第2和第4列><a href=#%e6%8f%90%e5%8f%96%e7%ac%ac3%e5%92%8c%e7%ac%ac5%e8%a1%8c%e4%b8%8e%e7%ac%ac2%e5%92%8c%e7%ac%ac4%e5%88%97><em>提取第<strong>3</strong>和第<strong>5</strong>行与第<strong>2</strong>和第<strong>4</strong>列</em></a></h4><p>result &lt;- emp.data[c(3,5),c(2,4)]</p><p># 列表中的（3,2）和（5,4）位置的数据</p><p>#先提出行，再提出列</p><h3 class=heading id=扩展数据帧><a href=#%e6%89%a9%e5%b1%95%e6%95%b0%e6%8d%ae%e5%b8%a7>扩展数据帧</a></h3><h4 class=heading id=添加列><a href=#%e6%b7%bb%e5%8a%a0%e5%88%97><em>添加列</em></a></h4><p>只需使用新列名称添加列向量。为每个研究对象添加新的属性。</p><p>新列：数据，数据，数据</p><p>emp.data$dept &lt;- c(&ldquo;IT&rdquo;,&ldquo;Operations&rdquo;,&ldquo;IT&rdquo;,&ldquo;HR&rdquo;,&ldquo;Finance&rdquo;)</p><h4 class=heading id=添加行><a href=#%e6%b7%bb%e5%8a%a0%e8%a1%8c><em>添加行</em></a></h4><p>要添加更多的行永久到现有的数据帧，我们需要引入<strong>新的行中的结构要与现有数据帧相同</strong>，并使用 rbind()函数。</p><p>即加入一个研究对象，但是他的属性要和原来的形同。</p><p># Create the first data frame.</p><p>emp.data &lt;- data.frame(</p><p>emp_id = c (1:5),</p><p>emp_name = c(&ldquo;Rick&rdquo;,&ldquo;Dan&rdquo;,&ldquo;Michelle&rdquo;,&ldquo;Ryan&rdquo;,&ldquo;Gary&rdquo;),</p><p>salary = c(623.3,515.2,611.0,729.0,843.25),</p><p>start_date = as.Date(c(&ldquo;2012-01-01&rdquo;,&ldquo;2013-09-23&rdquo;,&ldquo;2014-11-15&rdquo;,&ldquo;2014-05-11&rdquo;,&ldquo;2015-03-27&rdquo;)),</p><p>dept=c(&ldquo;IT&rdquo;,&ldquo;Operations&rdquo;,&ldquo;IT&rdquo;,&ldquo;HR&rdquo;,&ldquo;Finance&rdquo;),</p><p>stringsAsFactors=FALSE</p><p>)</p><p># Create the second data frame</p><p>emp.newdata &lt;- data.frame(</p><p>emp_id = c (6:8),</p><p>emp_name = c(&ldquo;Rasmi&rdquo;,&ldquo;Pranab&rdquo;,&ldquo;Tusar&rdquo;),</p><p>salary = c(578.0,722.5,632.8),</p><p>start_date = as.Date(c(&ldquo;2013-05-21&rdquo;,&ldquo;2013-07-30&rdquo;,&ldquo;2014-06-17&rdquo;)),</p><p>dept = c(&ldquo;IT&rdquo;,&ldquo;Operations&rdquo;,&ldquo;Fianance&rdquo;),</p><p>stringsAsFactors=FALSE</p><p>)</p><p># Bind the two data frames.</p><p>emp.finaldata &lt;- rbind(emp.data,emp.newdata)</p><p>print(emp.finaldata)</p><p>可以看成合并两个研究对象的数据到一个表。</p><hr><p>使用R处理导入的数据有时候需要程序包的使用。</p><h2 class=heading id=r语言软件包><a href=#r%e8%af%ad%e8%a8%80%e8%bd%af%e4%bb%b6%e5%8c%85>R语言软件包</a></h2><p>R程序包是R里面的函数，编译后的代码和样本数据的集合。它们是存储在在R环境下的 “library” 目录下。默认情况下R安装过程中会安装一组/些软件包。更多的包以后添加，当需要为某些特定目的使用时。当我们开始R控制台，只有默认默认情况下安装的包可用。已经安装了哪些其它包必须显式地装入要使用R程序，当在需要使用它们的时候。</p><p>R中语言，所有的包列在 R Packages.</p><h3 class=heading id=检查可用r程序包><a href=#%e6%a3%80%e6%9f%a5%e5%8f%af%e7%94%a8r%e7%a8%8b%e5%ba%8f%e5%8c%85>检查可用R程序包</a></h3><h4 class=heading id=获取包含r程序包库位置><a href=#%e8%8e%b7%e5%8f%96%e5%8c%85%e5%90%abr%e7%a8%8b%e5%ba%8f%e5%8c%85%e5%ba%93%e4%bd%8d%e7%bd%ae><em>获取包含R程序包库位置</em></a></h4><p>.libPaths()</p><h4 class=heading id=获取所有安装的软件包列表><a href=#%e8%8e%b7%e5%8f%96%e6%89%80%e6%9c%89%e5%ae%89%e8%a3%85%e7%9a%84%e8%bd%af%e4%bb%b6%e5%8c%85%e5%88%97%e8%a1%a8><em>获取所有安装的软件包列表</em></a></h4><p>library()</p><h4 class=heading id=获取当前在r环境中加载的所有软件包><a href=#%e8%8e%b7%e5%8f%96%e5%bd%93%e5%89%8d%e5%9c%a8r%e7%8e%af%e5%a2%83%e4%b8%ad%e5%8a%a0%e8%bd%bd%e7%9a%84%e6%89%80%e6%9c%89%e8%bd%af%e4%bb%b6%e5%8c%85><em>获取当前在<strong>R</strong>环境中加载的所有软件包</em></a></h4><p>search()</p><h4 class=heading id=安装一个新的软件包><a href=#%e5%ae%89%e8%a3%85%e4%b8%80%e4%b8%aa%e6%96%b0%e7%9a%84%e8%bd%af%e4%bb%b6%e5%8c%85><em>安装一个新的软件包</em></a></h4><p>有两种方法来添加新的R语言软件包。一种是直接从CRAN目录中进行安装，另一个是在将软件包下载到本地系统，并手动安装。</p><h5 class=heading id=直接从cran安装><a href=#%e7%9b%b4%e6%8e%a5%e4%bb%8ecran%e5%ae%89%e8%a3%85>直接从CRAN安装</a></h5><p>下面的命令直接从CRAN网页获取包，并在R语言环境中安装软件包。可能会提示您选择一个最近的镜像。选择一个适合自己的位置。</p><p>install.packages(&ldquo;Package Name&rdquo;)</p><p># Install the package named &ldquo;XML&rdquo;.</p><p>install.packages(&ldquo;XML&rdquo;)</p><h5 class=heading id=手动安装软件包><a href=#%e6%89%8b%e5%8a%a8%e5%ae%89%e8%a3%85%e8%bd%af%e4%bb%b6%e5%8c%85>手动安装软件包</a></h5><p><a href=#ZgotmplZ target=_blank rel=external>下载</a>需要的软件包。保存该包在一个合适的位置，在本地系统中的一个 .zip 文件。</p><p>现在可以运行下面的命令在R环境中安装该软件包。</p><p>install.packages(file_name_with_path, repos = NULL, type=&ldquo;source&rdquo;)</p><p># Install the package named &ldquo;XML&rdquo;</p><p>install.packages(&ldquo;E:/XML_3.98-1.3.zip&rdquo;, repos = NULL, type=&ldquo;source&rdquo;)</p><h4 class=heading id=装载软件包到库><a href=#%e8%a3%85%e8%bd%bd%e8%bd%af%e4%bb%b6%e5%8c%85%e5%88%b0%e5%ba%93><em>装载软件包到库</em></a></h4><p>在代码中使用一个软件包之前，它必须先加载到当前R环境。还需要加载一个已经以前安装的软件包，但在目前的环境中没有软件包。</p><p>一个软件包使用下面的命令加载：</p><p>library(&ldquo;package Name&rdquo;, lib.loc=&ldquo;path to library&rdquo;)</p><p># Load the package named &ldquo;XML&rdquo;</p><p>install.packages(&ldquo;E:/XML_3.98-1.3.zip&rdquo;, repos = NULL, type=&ldquo;source&rdquo;)</p><h2 class=heading id=r数据重塑><a href=#r%e6%95%b0%e6%8d%ae%e9%87%8d%e5%a1%91>R数据重塑</a></h2><p>R语言中的数据重塑是关于变化的数据分为行和列的方式。大多数R地数据处理的时候是通过将输入的数据作为一个数据帧进行。这是很容易提取一个数据帧的行和列数据，但在某些情况，当我们需要的数据帧的格式是不同的来自收到它的格式。 R有许多函数用来分割，合并，改变行列，反之亦然在一个数据帧。</p><h3 class=heading id=接合列和行中的数据帧><a href=#%e6%8e%a5%e5%90%88%e5%88%97%e5%92%8c%e8%a1%8c%e4%b8%ad%e7%9a%84%e6%95%b0%e6%8d%ae%e5%b8%a7>接合列和行中的数据帧</a></h3><p>我们可以加入多个向量创建使用 cbind()函数返回数据帧。</p><p>同时，我们也可以使用 rbind()函数合并两个数据帧。</p><p><u>简单来说,cbind()可以给所有人加个属性，rbind（）加个人和他的所有所学（加一排在后面）</u></p><p>#<code>Create vector objects.</code></p><p><code>city &lt;- c("Tampa","Seattle","Hartford","Denver")</code></p><p><code>state &lt;- c("FL","WA","CT","CO")</code></p><p><code>zipcode &lt;- c(33602,98104,06161,80294)</code></p><p><code>\# Combine above three vectors into one data frame.</code></p><p><code>addresses &lt;- cbind(city,state,zipcode)</code></p><p><code>\# Print a header.</code></p><p><code>cat("# # # # The First data framen")</code></p><p><code>\# Combine rows form both the data frames.</code></p><p><code>all.addresses &lt;- rbind(addresses,new.address)</code></p><h3 class=heading id=合并数据帧><a href=#%e5%90%88%e5%b9%b6%e6%95%b0%e6%8d%ae%e5%b8%a7>合并数据帧</a></h3><p>我们可以通过使用 merge()函数合并两个数据帧。该数据帧必须在其上合并发生相同的列名</p><h3 class=heading id=熔化和转换><a href=#%e7%86%94%e5%8c%96%e5%92%8c%e8%bd%ac%e6%8d%a2>熔化和转换</a></h3><p>melt（）：将属性那一列容忍对象，变成属性变量·值的的形式</p><p>cast（）：将属性变量·值重构为一列属性</p><p>我们认为数据集被称为 ships 出现在库被称为 &ldquo;MASS&rdquo;.</p><p>``library(MASS)`</p><p><code>print(ships)</code></p><h4 class=heading id=融化数据><a href=#%e8%9e%8d%e5%8c%96%e6%95%b0%e6%8d%ae><em>融化数据</em></a></h4><p>mo拆分数据进行重组，将除类型和年份以外的所有列转换为多行展示。</p><p><code>lten.ships &lt;- melt(ships, id = c("type","year"))</code></p><p><code>print(molten.ships)</code></p><h4 class=heading id=转换数据><a href=#%e8%bd%ac%e6%8d%a2%e6%95%b0%e6%8d%ae><em>转换数据</em></a></h4><p>我们可以将被拆分的数据转换为一种新形式，使用cast()函数创建每年每种类型的船的总和。</p><p>我们可以转化数据转换成在创建每种类型的 ships 每年的汇总的新形式。它是通过使用 case()函数。</p><h2 class=heading id=r语言处理csv文件><a href=#r%e8%af%ad%e8%a8%80%e5%a4%84%e7%90%86csv%e6%96%87%e4%bb%b6>R语言处理CSV文件</a></h2><h3 class=heading id=获取和设置工作目录><a href=#%e8%8e%b7%e5%8f%96%e5%92%8c%e8%ae%be%e7%bd%ae%e5%b7%a5%e4%bd%9c%e7%9b%ae%e5%bd%95>获取和设置工作目录</a></h3><p>可以获得 R 的工作空间目录指向使用 getwd()函数。也可以使用 setwd()函数来设置一个新的工作目录。</p><p>`# Get and print current working directory.`</p><p><code>print(getwd())</code></p><p>``</p><p><code>\# Set current working directory.</code></p><p><code>setwd("/web/com")</code></p><p>``</p><p><code>\# Get and print current working directory.</code></p><p><code>print(getwd())</code></p><h3 class=heading id=输入为csv文件><a href=#%e8%be%93%e5%85%a5%e4%b8%bacsv%e6%96%87%e4%bb%b6>输入为CSV文件</a></h3><p>CSV文件是以一个以列值是用逗号分隔的文本文件。让我们考虑目前命名文件：input.csv 的文件中的以下数据。</p><p>可以使用Windows记事本通过复制创建该文件，并粘贴这些数据到记事本中。使用另存为所有文件(<em>.</em>) ，在记事本选项将文件保存为：input.csv。</p><p>id,name,salary,start_date,dept</p><p>1,Rick,623.3,2012-01-01,IT</p><p>2,Dan,515.2,2013-09-23,Operations</p><p>3,Michelle,611,2014-11-15,IT</p><p>4,Ryan,729,2014-05-11,HR</p><p>,Gary,843.25,2015-03-27,Finance</p><p>6,Nina,578,2013-05-21,IT</p><p>7,Simon,632.8,2013-07-30,Operations</p><p>8,Guru,722.5,2014-06-17,Finance</p><h3 class=heading id=读一个csv文件><a href=#%e8%af%bb%e4%b8%80%e4%b8%aacsv%e6%96%87%e4%bb%b6>读一个CSV文件</a></h3><p>以下是 read.csv()函数的一个简单的例子，它读取在当前工作目录的可用的 CSV 文件：</p><p><code>data &lt;- read.csv("input.csv")</code></p><p><code>print(data)</code></p><h3 class=heading id=分析csv文件><a href=#%e5%88%86%e6%9e%90csv%e6%96%87%e4%bb%b6>分析CSV文件</a></h3><p>默认情况下，read.csv()函数给出一个数据帧的输出。这可以容易地确认如下。此外，我们可以检查列和行的数。</p><p><code>data &lt;- read.csv("input.csv")</code></p><p>``</p><p><code>print(is.data.frame(data))</code></p><p><code>print(ncol(data))</code></p><p><code>print(nrow(data))</code></p><h4 class=heading id=获得的最高薪水><a href=#%e8%8e%b7%e5%be%97%e7%9a%84%e6%9c%80%e9%ab%98%e8%96%aa%e6%b0%b4><em>获得的最高薪水</em></a></h4><p><code>sal &lt;- max(data$salary) #从data使用max函数访问salary，输出最大值给sal。</code></p><h4 class=heading id=找最大薪水的人的细节信息><a href=#%e6%89%be%e6%9c%80%e5%a4%a7%e8%96%aa%e6%b0%b4%e7%9a%84%e4%ba%ba%e7%9a%84%e7%bb%86%e8%8a%82%e4%bf%a1%e6%81%af><em>找最大薪水的人的细节信息</em></a></h4><p><code>retval &lt;- subset(data, salary == max(salary))</code></p><p><code>\#从data使用subset函数访问salsry中值为max（salary）的对象，输出对象的细节信息给retval。</code></p><p>``</p><p><code>retval &lt;- subset( data, dept == "IT")</code></p><p>同理，访问data之中IT的相关信息</p><p>就像人找表一样。</p><h3 class=heading id=写入到csv文件><a href=#%e5%86%99%e5%85%a5%e5%88%b0csv%e6%96%87%e4%bb%b6>写入到CSV文件</a></h3><p>R语言能够从现有的数据帧来创建 csv 文件。write.csv()函数用于创建CSV文件。这个文件会在工作目录中创建。</p><p>`# Create a data frame.`</p><p><code>data &lt;- read.csv("input.csv")</code></p><p><code>retval &lt;- subset(data, as.Date(start_date) > as.Date("2014-01-01"))</code></p><p>``</p><p><code>\# Write filtered data into a new file.</code></p><p><code>write.csv(retval,"output.csv")</code></p><p><code>newdata &lt;- read.csv("output.csv")</code></p><p><code>print(newdata)</code></p><p>``</p><p>读取，写入，再读取检验。</p><p><code>write.csv(retval,"output.csv", row.names=FALSE)</code></p><p><code>\# 关闭行源id</code></p></div></div><div class=site-comment></div><div class=site-right data-pjax></div></div><div id=fastSearch><div id=MSG></div><div class=fast-search-container><div class=fast-search-header><input id=searchInput autocomplete=off>
<span class=fast-search-hint id=searchHint>CTRL-/</span></div><ul id=searchResults><div id=searchLoading class=lds-default><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div><div></div></div></ul></div></div><script src=/js/fuse.min.js></script>
<script src=/js/fastsearch.js></script><footer class=site-footer id=SiteFooter><div class=footer-copyright>© 2020 - 2023
<img src=/images/sxin.png alt="Big Boat" width=30px><span><a href=https://sdiopid.com target=_blank>yuhuai GUO</a></span></div><div class=footer-powerby><span>Powered by <a href=https://gohugo.io target=_blank>Hugo</a></span>
<span class=division>|</span>
<span>Theme - <a href=https://github.com/alohaia/hugo-theme-daisilia target=_blank>Daisilia</a></span></div><div class=footer-creativecommons>本博客所有文章除特别声明外，均采用 <a rel=license href=https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh target=_blank><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处。</div></footer><aside class=site-sidebar id=SiteSidebar><div class=sidebar-container><div class=sidebar-nav data-pjax><span role=button class="sidebar-nav-item sidebar-nav-series">Table of Content</span>
<span role=button class="sidebar-nav-item sidebar-nav-overview">Overview</span></div><div class=sidebar-content><div class="sidebar-toc sidebar-pannel" data-pjax><h1 class=toc-title id=TOCTitle>121.5_R_data-format and exchange</h1><nav id=TableOfContents><ul><li><a href=#r语言数据帧>R语言数据帧</a><ul><li><a href=#创建数据帧>创建数据帧</a></li><li><a href=#得到数据帧的结构>得到数据帧的结构</a></li><li><a href=#数据在数据帧摘要>数据在数据帧摘要</a></li><li><a href=#从数据帧中提取数据>从数据帧中提取数据</a><ul><li><a href=#使用列名称从数据帧提取特定的列><em>使用列名称从数据帧提取特定的列</em></a></li><li><a href=#提取第3和第5行与第2和第4列><em>提取第<strong>3</strong>和第<strong>5</strong>行与第<strong>2</strong>和第<strong>4</strong>列</em></a></li></ul></li><li><a href=#扩展数据帧>扩展数据帧</a><ul><li><a href=#添加列><em>添加列</em></a></li><li><a href=#添加行><em>添加行</em></a></li></ul></li></ul></li><li><a href=#r语言软件包>R语言软件包</a><ul><li><a href=#检查可用r程序包>检查可用R程序包</a><ul><li><a href=#获取包含r程序包库位置><em>获取包含R程序包库位置</em></a></li><li><a href=#获取所有安装的软件包列表><em>获取所有安装的软件包列表</em></a></li><li><a href=#获取当前在r环境中加载的所有软件包><em>获取当前在<strong>R</strong>环境中加载的所有软件包</em></a></li><li><a href=#安装一个新的软件包><em>安装一个新的软件包</em></a><ul><li><a href=#直接从cran安装>直接从CRAN安装</a></li><li><a href=#手动安装软件包>手动安装软件包</a></li></ul></li><li><a href=#装载软件包到库><em>装载软件包到库</em></a></li></ul></li></ul></li><li><a href=#r数据重塑>R数据重塑</a><ul><li><a href=#接合列和行中的数据帧>接合列和行中的数据帧</a></li><li><a href=#合并数据帧>合并数据帧</a></li><li><a href=#熔化和转换>熔化和转换</a><ul><li><a href=#融化数据><em>融化数据</em></a></li><li><a href=#转换数据><em>转换数据</em></a></li></ul></li></ul></li><li><a href=#r语言处理csv文件>R语言处理CSV文件</a><ul><li><a href=#获取和设置工作目录>获取和设置工作目录</a></li><li><a href=#输入为csv文件>输入为CSV文件</a></li><li><a href=#读一个csv文件>读一个CSV文件</a></li><li><a href=#分析csv文件>分析CSV文件</a><ul><li><a href=#获得的最高薪水><em>获得的最高薪水</em></a></li><li><a href=#找最大薪水的人的细节信息><em>找最大薪水的人的细节信息</em></a></li></ul></li><li><a href=#写入到csv文件>写入到CSV文件</a></li></ul></li></ul></nav></div><div class="sidebar-overview sidebar-pannel"><div class=sidebar-avatar><a href=/about><img class=site-avatar-image alt="cheerful Bma110" src=/images/favicon.png></a></div><p class=site-author-name>yuhuai GUO</p><p class=site-description>Subtitle here</p><div class=sidebar-social><a class=sidebar-social-item href=mailto:yuhuaguo2@gmail.com><i class="fas fa-envelope"></i>E-Mail</a></div><div class=site-overview><a class=site-overview-item href=/><p class=site-overview-num>79</p><p class=site-overview-name>Pages</p></a><a class=site-overview-item href=/tags><p class=site-overview-num>12</p><p class=site-overview-name>Tags</p></a><a class=site-overview-item href=/series><p class=site-overview-num>1</p><p class=site-overview-name>Series</p></a></div><div class="sidebar-quote collapsed"><p class=sidebar-quote-content id=SidebarQuoteContent>主人不来过夜半，闲敲棋子落灯花。</p><p class=sidebar-quote-from id=SidebarQuoteFrom>宋代·赵师秀《约客》</p></div></div></div><div class=back2top id=Back2top role=button><i class="back2top-icon fas fa-angle-double-up"></i>
<span class=back2top-progress id=Back2topProgress></span></div></div><div class=sidebar-toggle id=SidebarToggle role=button><i class="sidebar-toggle-icon right-arrow">&#xf061</i>
<i class="sidebar-toggle-icon bars">&#xf0c9</i>
<i class="sidebar-toggle-icon left-arrow">&#xf060</i></div><div id=SidebarFill></div></aside></div><div class=loading-track><div class=loading-progress></div></div><script src=/js/fancybox.umd.js></script>
<link rel=stylesheet type=text/css href=/css/fancybox.css><script type=module>
  Fancybox.bind("[data-fancybox]", {
    "groupAll": true,
    "hideScrollbar": true, 
  });
</script><script src=/js/daisy.min.b9864472055eaad246f90423fde1708fc695b6231716bfcb4c004ca26c97d41c.js integrity="sha256-uYZEcgVeqtJG+QQj/eFwj8aVtiMXFr/LTABMomyX1Bw="></script><script data-pjax src=/js/daisy.each.min.a25c3b51804113c6ef30f3f8487cf8dfc65eb7d7e835ea200ccd5d3c49088a79.js integrity="sha256-olw7UYBBE8bvMPP4SHz438Zet9foNeogDM1dPEkIink="></script><script src=/js/pjax.js></script><script src=/js/pjax.min.5e89e0a5c0f3331096eff308be1a354fb0d1bec669611ddcba67693f4adcb6f5.js integrity="sha256-XongpcDzMxCW7/MIvho1T7DRvsZpYR3cumdpP0rctvU="></script><script src=https://sdk.jinrishici.com/v2/browser/jinrishici.js></script>
<script>var content_part,content_full,is_poem=!0,Result;const wrap=document.getElementsByClassName("sidebar-quote")[0],content=document.getElementById("SidebarQuoteContent"),from=document.getElementById("SidebarQuoteFrom");function toggleFull(){wrap.classList.toggle("expanded"),wrap.classList.toggle("collapsed"),content.innerHTML==content_part?content.innerHTML=content_full:content.innerHTML=content_part}jinrishici.load(function(e){Result=e,content_part=e.data.content,content.innerText=content_part,from.innerHTML=`<span class="author">${e.data.origin.dynasty}·${e.data.origin.author}</span>`+`<span class="title">《${e.data.origin.title}》</span>`;var t="",n=/^([^，。！？]{5}[，。！？][^，。！？]{5}[，。！？]|[^，。！？]{7}[，。！？][^，。！？]{7}[，。！？])+$/g;e.data.origin.content.forEach(e=>{e.match(n)||(is_poem=!1)}),is_poem?content.classList.add("poem"):t="&nbsp".repeat(8),content_full=t+e.data.origin.content.join("<br>"+t),content.onclick=toggleFull})</script></body></html>